{"version":3,"sources":["webpack:///./src/pages/projects.js","webpack:///./src/utils/helpers.js"],"names":["data","useState","filteredData","query","state","allFeaturedImages","allFile","edges","allPosts","allMarkdownRemark","featuredImageMap","Utils","getImageMap","filteredPosts","title","fluid","className","map","node","key","id","to","fields","slug","featuredImage","frontmatter","subtitle","date","excerpt","images","regex","hasMultipleImages","limit","reduce","image","relativePath","match","hasOwnProperty","length","push","childImageSharp","arr"],"mappings":"2NAMe,sBAAe,IAAZA,EAAW,EAAXA,KAAW,EACDC,mBAAS,CACjCC,aAAc,GACdC,MAAO,KAFFC,EADoB,KAMrBC,GANqB,KAMDL,EAAKM,QAAQC,OAAS,IAC1CC,EAAWR,EAAKS,kBAAkBF,OAAS,GAE3CG,EAAmBC,IAAMC,YAAYP,EAD7B,sBA0BNH,EAAwBE,EAAxBF,aACFW,EAA0B,KADAT,EAAVD,MACeD,EAAeM,EAEpD,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKM,MAAM,aACX,kBAAC,IAAD,CAAWA,MAAM,aAEjB,kBAAC,IAAD,CACEC,OAAK,EACLC,UAAU,gEAETH,EAAcI,KAAI,gBAAGC,EAAH,EAAGA,KAAH,OACjB,yBAAKC,IAAKD,EAAKE,GAAIJ,UAAU,OAC3B,kBAAC,IAAD,CACEK,GAAIH,EAAKI,OAAOC,KAChBC,cAAed,EAAiBQ,EAAKI,OAAOC,MAC5CT,MAAOI,EAAKO,YAAYX,MACxBY,SAAUR,EAAKO,YAAYE,KAC3BC,QAASV,EAAKU,iBASrB,IAAMzB,EAAK,c,0HCpEH,G,oBAAA,CACbS,YAAa,SAACiB,EAAQC,EAAOC,EAA2BC,GACtD,YADoE,IAAzCD,OAAoB,QAAqB,IAAdC,MAAQ,GACvDH,EAAOI,QAAO,SAAChB,EAAKiB,GACzB,IAAMX,EAAOW,EAAMhB,KAAKiB,aAAaC,MAAMN,GAAO,GAClD,GAAIC,EACF,GAAId,EAAIoB,eAAed,GACjBN,EAAIM,GAAMe,QAAUN,GACtBf,EAAIM,GAAMgB,KAAKL,EAAMhB,KAAKsB,gBAAgBzB,WACvC,CACL,IAAM0B,EAAM,GACZA,EAAIF,KAAKL,EAAMhB,KAAKsB,gBAAgBzB,OACpCE,EAAIM,GAAQkB,OAGdxB,EAAIM,GAAQW,EAAMhB,KAAKsB,gBAAgBzB,MAEzC,OAAOE,IACN","file":"component---src-pages-projects-js-49b80fa558d0ee180596.js","sourcesContent":["import React, { useState } from \"react\"\nimport { graphql } from \"gatsby\"\nimport { PageLayout, PageTitle, ProjectsLink } from \"../components\"\nimport { SEO, Utils } from \"../utils\"\nimport { Container, Form, FormControl } from \"react-bootstrap\"\n\nexport default ({ data }) => {\n  const [state, setState] = useState({\n    filteredData: [],\n    query: \"\",\n  })\n\n  const allFeaturedImages = data.allFile.edges || []\n  const allPosts = data.allMarkdownRemark.edges || []\n  const regex = /\\/[projects].*\\/|$/\n  const featuredImageMap = Utils.getImageMap(allFeaturedImages, regex)\n\n  const handleChange = e => {\n    const query = e.target.value\n\n    const filteredData = allPosts.filter(post => {\n      // query will run on the following fields\n      const { description, title, tags, author } = post.node.frontmatter\n      // standardize query\n      const stdQuery = query.toLowerCase()\n      return (\n        post.node.excerpt.toLowerCase().includes(stdQuery) ||\n        (description && description.toLowerCase().includes(stdQuery)) ||\n        title.toLowerCase().includes(stdQuery) ||\n        author.toLowerCase().includes(stdQuery) ||\n        (tags && tags.join(\"\").toLowerCase().includes(stdQuery))\n      )\n    })\n\n    setState({\n      query,\n      filteredData,\n    })\n  }\n\n  const { filteredData, query } = state\n  const filteredPosts = query !== \"\" ? filteredData : allPosts\n\n  return (\n    <PageLayout>\n      <SEO title=\"Projects\" />\n      <PageTitle title=\"Projects\" />\n\n      <Container\n        fluid\n        className=\"p-3 w-auto text-left d-flex flex-wrap justify-content-center\"\n      >\n        {filteredPosts.map(({ node }) => (\n          <div key={node.id} className=\"p-3\">\n            <ProjectsLink\n              to={node.fields.slug}\n              featuredImage={featuredImageMap[node.fields.slug]}\n              title={node.frontmatter.title}\n              subtitle={node.frontmatter.date}\n              excerpt={node.excerpt}\n            />\n          </div>\n        ))}\n      </Container>\n    </PageLayout>\n  )\n}\n\nexport const query = graphql`\n  query {\n    allMarkdownRemark(\n      filter: { fileAbsolutePath: { regex: \"/projects/\" } }\n      sort: { fields: [frontmatter___date], order: DESC }\n    ) {\n      totalCount\n      edges {\n        node {\n          id\n          frontmatter {\n            title\n            description\n            tags\n            author\n            date(formatString: \"DD MMMM, YYYY\")\n          }\n          fields {\n            slug\n          }\n          excerpt\n        }\n      }\n    }\n    allFile(\n      filter: {\n        extension: { eq: \"jpg\" }\n        relativePath: { regex: \"/feature/\" }\n        relativeDirectory: { regex: \"/content/projects/\" }\n      }\n    ) {\n      edges {\n        node {\n          childImageSharp {\n            fluid(maxWidth: 400) {\n              ...GatsbyImageSharpFluid\n            }\n          }\n          relativePath\n        }\n      }\n    }\n  }\n`\n","export default {\n  getImageMap: (images, regex, hasMultipleImages = false, limit = 3) => {\n    return images.reduce((map, image) => {\n      const slug = image.node.relativePath.match(regex)[0]\n      if (hasMultipleImages) {\n        if (map.hasOwnProperty(slug)) {\n          if (map[slug].length <= limit)\n            map[slug].push(image.node.childImageSharp.fluid)\n        } else {\n          const arr = []\n          arr.push(image.node.childImageSharp.fluid)\n          map[slug] = arr\n        }\n      } else {\n        map[slug] = image.node.childImageSharp.fluid\n      }\n      return map\n    }, {})\n  },\n}\n"],"sourceRoot":""}